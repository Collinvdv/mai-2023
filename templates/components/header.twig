{# ========================================================================== #}
{# :: Component #}
{# ========================================================================== #}
{# Announcement #}
<div class="bg-black text-white text-center p-2 flex items-center justify-center">
    <small class="mr-2 text-sm">
        {{ header.commonTitle }}
    </small>

    {% include "/components/link.twig" with { 
        href : header.commonLink,
        text : header.commonLink.getText(),
        color: "white",
        isSmall: true
    } %}
</div>
{# Secondary header  #}
<div class="bg-primary py-2">
    <div class="container mx-auto px-4">
        <ul class="flex justify-end gap-6">
            {% for link in header.commonSecondaryLinks.all() %}
                <li>
                    <a class="font-normal text-sm" href="{{ link.page }}">{{ link.page.getText() }}</a>
                </li>
            {% endfor %}
        </ul>
    </div>
</div>

{# Main header #}
<header class="container mx-auto flex justify-between items-center p-4 py-6">
    {# Logo #}
    <a href="/">
        {% include "/components/logos/logo.twig" with {
            customClass: 'w-80'
        } %}
    </a>

    {# Menu #}
    <nav>
        <ul class="flex gap-12">
            {% for menuItem in header.commonMainMenu.level(1).all() %}
                <li>
                    {# Normal link #}
                    <div class="relative">
                        {% if menuItem.commonLinks|length == 0 %}
                            <a href="{{menuItem.commonLink}}" >
                                {{ menuItem.commonLink.getText()}}
                            </a>
                        {% endif %}

                        {# Link with parent #}
                        {% if menuItem.commonLinks|length > 0 %}
                            <div x-data="{ open: false }">
                                <span @click="open = !open">
                                    {{ menuItem.commonLink.getText()}}
                                </span>

                                <div 
                                    x-show="open" 
                                    x-transition:enter="transition ease-out duration-200"
                                    x-transition:enter-start="opacity-0 translate-y-1"
                                    x-transition:enter-end="opacity-100 translate-y-0"
                                    x-transition:leave="transition ease-in duration-150"
                                    x-transition:leave-start="opacity-100 translate-y-0"
                                    x-transition:leave-end="opacity-0 translate-y-1"
                                    class="absolute left-1/2 z-10 mt-5 flex w-screen max-w-max -translate-x-1/2 px-4">
                                    <div class="w-screen max-w-md flex-auto overflow-hidden rounded-3xl bg-white text-sm leading-6 shadow-lg ring-1 ring-gray-900/5">
                                        <div class="p-4">
                                            {% for subNavMenuItem in menuItem.commonLinks.all() %}
                                                <div class="group relative flex gap-x-6 rounded-lg p-4 hover:bg-gray-50">
                                                    <a href="{{ subNavMenuItem.page }}" class="font-semibold text-gray-900">
                                                        {{ subNavMenuItem.page.getText() }}
                                                    </a>
                                                </div>
                                            {% endfor %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                    </div>
                </li>
            {% endfor %}
        </ul>
    </nav>
</header>