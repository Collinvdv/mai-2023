{# ========================================================================== #}
{# :: Variables #}
{# ========================================================================== #}
{% set title = data.commonTitle ?? "" %}
{% set description = data.commonDescription ?? "" %} 
{% set link = data.commonLink ?? "" %} 
{% set secondaryLink = data.commonSecondaryLink ?? "" %} 
{% set color = data.commonColor ?? "" %} 
{% set tags = data.commonTags ?? "" %} 

{% import "/macros/color" as colorMacro %}

{% switch color %}
    {% case 'primary' %}
        {% set colorBackground = "bg-primary" %}
        {% set buttonBackground = "white" %}
        {% 
            set colorLeft = {
                pacman: "fill-white",
                circle: "fill-lavendel",
                triangle:  "fill-rose",
                stripes: "fill-blue",
            }
        %}

        {% 
            set colorRight = {
                pacman: "fill-white",
                circle: "fill-lavendel",
                triangle:  "fill-rose",
                stripes: "fill-blue",
            }
        %}
    {% case 'white' %}
        {% set colorBackground = "bg-white" %}
        {% set buttonBackground = "primary" %}
        {% 
            set colorLeft = {
                pacman: "fill-primary",
                circle: "fill-lavendel",
                triangle:  "fill-rose",
                stripes: "fill-blue",
            }
        %}

        {% 
            set colorRight = {
                pacman: "fill-primary",
                circle: "fill-lavendel",
                triangle:  "fill-rose",
                stripes: "fill-blue",
            }
        %}
    {% case 'rose' %}
        {% set colorBackground = "bg-white" %}
        {% set buttonBackground = "primary" %}
        {% 
            set colorLeft = {
                pacman: "fill-white",
                circle: "fill-rose",
                triangle:  "fill-primary",
                stripes: "fill-primary",
            }
        %}

        {% 
            set colorRight = {
                pacman: "fill-white",
                circle: "fill-rose",
                triangle:  "fill-rose",
                stripes: "fill-primary",
            }
        %}
    {% case 'violet' %}
        {% set colorBackground = "bg-white" %}
        {% set buttonBackground = "primary" %}
        {% 
            set colorLeft = {
                pacman: "fill-white",
                circle: "fill-violet",
                triangle:  "fill-primary",
                stripes: "fill-primary",
            }
        %}

        {% 
            set colorRight = {
                pacman: "fill-white",
                circle: "fill-violet",
                triangle:  "fill-violet",
                stripes: "fill-primary",
            }
        %}
    {% case 'blue' %}
        {% set colorBackground = "bg-white" %}
        {% set buttonBackground = "primary" %}
        {% 
            set colorLeft = {
                pacman: "fill-white",
                circle: "fill-blue",
                triangle:  "fill-primary",
                stripes: "fill-primary",
            }
        %}

        {% 
            set colorRight = {
                pacman: "fill-white",
                circle: "fill-blue",
                triangle:  "fill-blue",
                stripes: "fill-primary",
            }
        %}
    {% default %}
        {% set colorBackground = "bg-primary" %}
        {% set buttonBackground = "white" %}
        {% 
            set colorLeft = {
                pacman: "fill-white",
                circle: "fill-lavendel",
                triangle:  "fill-rose",
                stripes: "fill-blue",
            }
        %}

        {% 
            set colorRight = {
                pacman: "fill-white",
                circle: "fill-lavendel",
                triangle:  "fill-rose",
                stripes: "fill-blue",
            }
        %}
{% endswitch %}

{# ========================================================================== #}
{# :: Component #}
{# ========================================================================== #}
<div class="{{colorBackground}} py-20 relative">
    <div class="container mx-auto">
        {# Shape left #}
        {% include "/components/shapes/left.twig" with {
            customClasses: "absolute left-0 top-0 w-2/12 pb-24",
            colors: colorLeft
        } %}

        {# Content #}
        <div class="px-4 flex flex-col items-center w-8/12 text-center gap-6 mx-auto">
            <div class="flex flex-col gap-1 items-center">
                {% if data.commonIcon.one() %}
                    <img class="w-12 h-12" src="{{ data.commonIcon.one().url }}" alt="{{ data.commonIcon.one().alt }}">
                {% endif %}

                {% if tags %}
                    <div class="flex flex-row gap-2">
                        {% for tag in tags %}
                            <div class="text-xs uppercase font-bold bg-grey p-1 px-2">
                                {{ tag }}
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>

            <h2>
                {{ title }}
            </h2>

            <div>
                {{ description|nl2br }}
            </div>

            {# Buttons #}
            <ul class="flex gap-8 items-center">
                {% if link and link.getText() %}
                    <li>
                        {% include "/components/button.twig" with { 
                            href :link,
                            text : link.getText(),
                            color: buttonBackground,
                        }
                            only
                        %}
                    </li>
                {% endif %}

                {% if secondaryLink and secondaryLink.getText() %}
                    <li>
                        {% include "/components/link.twig" with { 
                            href : secondaryLink,
                            text : secondaryLink.getText(),
                            icon: "arrow-down"
                        } only %}
                    </li>
                {% endif %}
            </ul>
        </div>

        {# Shape right #}
        {% include "/components/shapes/right.twig" with {
            customClasses: "absolute right-0 bottom-0 w-2/12 pt-8",
            colors: colorRight
        } %}
    </div>
</div>